
<div class="edwards-banner-section row py-lg-3"> 
    <div class="col p-0 d-none d-lg-block"> 
       <div class="row no-gutters"> 
          <div class="col pr-3"> 
             <a class="banner d-block" href="/teams/OEB/Pages/Apage1.aspx" > 
                <div class="headings position-absolute bl-0 mx-auto mb-4 px-5"> 
                   <span class="badge badge-danger x-small text-uppercase bg-primary ls-1 mb-2 rounded-0 p-1 ">-</span> 
                   <h5 class="text-white font-weight-bold">-</h5> 
                   <p class="text-white m-0">-</p> 
                </div> </a> </div> 
          <div class="col"> 
             <div class="row no-gutters mb-3"> 
                <div class="col pr-3"> 
                   <a class="banner d-block banner2" href="/teams/OEB/Pages/Apage2.aspx"> 
                      <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                         <span class="badge badge-danger x-small text-uppercase bg-primary ls-1 mb-2 rounded-0 p-1 ">-</span> 
                         <h5 class="text-white">-</h5> 
                         <p class="text-white m-0 small">-</p> 
                      </div> </a> </div> 
                <div class="col"> 
                   <a class="banner d-block banner2" href="/teams/OEB/Pages/APage3.aspx" > 
                      <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                         <span class="badge badge-danger x-small text-uppercase bg-primary ls-1 mb-2 rounded-0 p-1 ">-</span> 
                         <h5 class="text-white">-</h5> 
                         <p class="text-white m-0">-</p> 
                      </div> </a> </div> 
             </div> 
             <div class="row no-gutters"> 
                <div class="col pr-3"> 
                   <a class="banner d-block banner2" href="/teams/OEB/Pages/Apage4.aspx" > 
                      <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                         <span class="badge badge-danger x-small text-uppercase bg-primary ls-1 mb-2 rounded-0 p-1 ">-</span> 
                         <h5 class="text-white">-</h5> 
                         <p class="text-white m-0 small">-</p> 
                      </div> </a> </div> 
                <div class="col"> 
                   <a class="banner banner2 d-block" href="/teams/OEB/Pages/Apage5.aspx" > 
                      <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                         <span class="badge badge-danger x-small text-uppercase bg-primary ls-1 mb-2 rounded-0 p-1 ">-</span> 
                         <h5 class="text-white">-</h5> 
                         <p class="text-white m-0">-</p> 
                      </div> </a> </div> 
             </div> 
          </div> 
       </div> 
    </div> 
 </div> 
 <!-- Mobile banner --> 
    <div class="edwards-banner-section edwards-mbl-carousel row"> 
       <div class=" col p-0 d-block d-lg-none"> 
          <div class="carousel slide" id="carouselExampleIndicators" data-interval="false" data-ride="carousel"> 
             <div class="carousel-inner"> 
                <div class="carousel-item banner active" > 
                   <img class="w-100 invisible" src="" alt=""/> 
                   <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                      <h5 class="text-white">-</h5> 
                      <p class="text-white m-0 small">-</p> 
                   </div> 
                </div> 
                <div class="carousel-item banner" > 
                   <img class="w-100 invisible" src="" alt=""/> 
                   <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                      <h5 class="text-white">-</h5> 
                      <p class="text-white m-0 small">-</p> 
                   </div> 
                </div> 
                <div class="carousel-item banner" > 
                   <img class="w-100 invisible" src="/teams/OEB/PublishingImages/Apage3_Image.jpg" alt=""/> 
                   <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                      <h5 class="text-white">-</h5> 
                      <p class="text-white m-0 small">-</p> 
                   </div> 
                </div> 
                <div class="carousel-item banner" > 
                   <img class="w-100 invisible" src="/teams/OEB/PublishingImages/Apage3_Image.jpg" alt=""/> 
                   <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                      <h5 class="text-white">-</h5> 
                      <p class="text-white m-0 small">-</p> 
                   </div> 
                </div> 
                <div class="carousel-item banner" > 
                   <img class="w-100 invisible" src="/teams/OEB/PublishingImages/Apage3_Image.jpg" alt=""/> 
                   <div class="headings position-absolute bl-0 mx-auto mb-4 px-3"> 
                      <h5 class="text-white">-</h5> 
                      <p class="text-white m-0 small">-</p> 
                   </div> 
                </div> 
             </div> 
             <ol class="carousel-indicators position-static"> 
                <li class="active" data-slide-to="0" data-target="#carouselExampleIndicators">
                </li> 
                <li data-slide-to="1" data-target="#carouselExampleIndicators">
                </li> 
                <li data-slide-to="2" data-target="#carouselExampleIndicators">
                </li> 
                <li data-slide-to="3" data-target="#carouselExampleIndicators">
                </li> 
                <li data-slide-to="4" data-target="#carouselExampleIndicators">
                </li> 
             </ol> 
          </div> 
       </div> 
    </div> 
    <!-- end Mobile banner -->​<br/>​<br/> 
       <script type="text/javascript">	
     /*===  variables ===*/
     var clientContext;
     var oList;
     var responseMsg = '';
     /*===  variables ===*/
     
     /*===  get list items () called from here ===*/

     $( document ).ready(function() {
         SP.SOD.executeFunc('sp.js', 'SP.ClientContext', function(){
            getHomePageBannerItems();
         });
      });

     /*===  get list items called from here ===*/
     
     
     /*===  helper functions ===*/
     
     function onQueryFailed(sender, args) {
         var customMsg = this.errorMsg? this.errorMsg : '';
         alert(customMsg + args.get_message() + '\n' + args.get_stackTrace());
     }
     /*===  helper functions ===*/
     
     function getHomePageBannerItems() {
         clientContext = new SP.ClientContext();
         oList = clientContext.get_web().get_lists().getByTitle('Pages');
         var camlQuery = new SP.CamlQuery();
         var q = "<View><Query><Where>" +"<Eq>" + "<FieldRef Name='CarouselActive' />" + "<Value Type='Boolean'>1</Value>" + "</Eq>" + " </Where>" + "<OrderBy><FieldRef Name='CarouselOrder' Ascending='True' /></OrderBy>" + "</Query>" + "</View>";
         camlQuery.set_viewXml(q);
         this.collListItem = oList.getItems(camlQuery);
         //if we don't use 'include' all fields are returned.
         //Since we also need every page's url, we need to get built-in 'EncodedAbsUrl' field which works only if we include it.
         //For that, we had to include all the other fields too.
         clientContext.load(collListItem, "Include(ID, CarouselActive, CarouselTitle, CarouselDescription, TaxKeyword, CarouselImage, CarouselOrder, EncodedAbsUrl)");
         this.errorMsg = "Get list items request failed! "; //this is available in success/error functions called below;
         clientContext.executeQueryAsync(Function.createDelegate(this, this.onHomePageBannerItemsQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));        
     }
     
     function onHomePageBannerItemsQuerySucceeded(sender, args) {
         var listItemInfo = [];
         var listItemEnumerator = collListItem.getEnumerator();	
         while (listItemEnumerator.moveNext()) {
             var oListItem = listItemEnumerator.get_current();
             var item = {
                 id: oListItem.get_item('ID'),
                 carouselActive: oListItem.get_item('CarouselActive'),
                 carouselTitle: oListItem.get_item('CarouselTitle'),
                 carouselDescription: oListItem.get_item('CarouselDescription'),
                 taxKeyword: oListItem.get_item('TaxKeyword'),
                 carouselImage: oListItem.get_item('CarouselImage'),
                 carouselOrder: oListItem.get_item('CarouselOrder'),
                 pageUrl: oListItem.get_item('EncodedAbsUrl')
                 };
             listItemInfo.push(item);
         }
         for (var i = 0; i < listItemInfo.length; i++) {
             var item = listItemInfo[i];
             if(item.carouselImage)
             $('.edwards-banner-section').find('.banner:eq('+ i +')').css('background-image', 'url(' + item.carouselImage.$1_1 + ')');
             $('.edwards-banner-section').find('.banner:eq('+ i +')').find('h5').text(item.carouselTitle);
             $('.edwards-banner-section').find('.banner:eq('+ i +')').find('p').text(item.carouselDescription);
             if(item.taxKeyword._Child_Items_.length)
                 $('.edwards-banner-section').find('.banner:eq('+ i +')').find('.badge').text(item.taxKeyword._Child_Items_[0].Label);
             $('.edwards-banner-section .banner:eq('+ i +')').attr("href", item.pageUrl);	
         }
         // if(listItemInfo.length){
         //    $('.edwards-banner-section').removeClass('d-none');
         // }
         
         /*load data into carousel(it appears in mobile devices only)*/ 
         $('.edwards-banner-section .carousel-item').each(function(i, obj) {
             if(listItemInfo[i]){
                 if(listItemInfo[i].carouselImage)
                     $(this).children("img:first").attr('src', listItemInfo[i].carouselImage.$1_1);
                 $(this).find("h5:first").text(listItemInfo[i].carouselTitle);
                 $(this).find("p:first").text(listItemInfo[i].carouselDescription);
                 //if(listItemInfo[i].taxKeyword._Child_Items_.length)
                     //$(this).find("div.type:first").text(listItemInfo[i].taxKeyword._Child_Items_[0].Label);
                 //$(this).attr("href", listItemInfo[i].pageUrl);
             }
         });
     }
     
 </script>​​<br/>