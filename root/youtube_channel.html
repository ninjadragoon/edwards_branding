<!-- edwards channel --> 
<div class="row">
    <div class="edwards-channel-sec bg-dark col-lg-6 p-3 py-5 p-xl-5">
        <h4 class="text-uppercase font-weight-bold ls-1 text-white edwards-brdr no-gry mb-3">edwards channel</h4>
        <div class="d-none d-lg-block edwards-videos">
            <div class="embed-responsive embed-responsive-16by9 mb-4">
                <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                <div class="position-absolute bl-0 text-white mx-auto px-3 mb-3">Short description of the video hightlighting video content.</div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="embed-responsive embed-responsive-16by9 mb-2">
                    <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                    </div>
                    <b class="text-white">Major updates to technology</b>
                </div>
                <div class="col">
                    <div class="embed-responsive embed-responsive-16by9 mb-2">
                    <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                    </div>
                    <b class="text-white">2018 Updates on Roadmap</b>
                </div>
                <div class="col">
                    <div class="embed-responsive embed-responsive-16by9 mb-2">
                    <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                    </div>
                    <b class="text-white">2018 Updates on Roadmap</b>
                </div>
            </div>
        </div>

        <div class="edwards-mbl-carousel d-block d-lg-none">
            <div id="carouselExampleIndicators01" class="carousel slide" data-ride="carousel" data-interval="false">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                        <div class="embed-responsive embed-responsive-16by9 mb-4">
                            <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                            <div class="position-absolute bl-0 text-white mx-auto px-3 mb-3">Short description of the video hightlighting video content.</div>
                        </div>
                  </div>
                  <div class="carousel-item">
                        <div class="embed-responsive embed-responsive-16by9 mb-4">
                            <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                            <div class="position-absolute bl-0 text-white mx-auto px-3 mb-3">Short description of the video hightlighting video content.</div>
                        </div>
                  </div>
                  <div class="carousel-item">
                        <div class="embed-responsive embed-responsive-16by9 mb-4">
                            <iframe src="https://www.youtube.com/embed/xk1ViU6w3QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
                            <div class="position-absolute bl-0 text-white mx-auto px-3 mb-3">Short description of the video hightlighting video content.</div>
                        </div>
                  </div>
                </div>
                <ol class="carousel-indicators position-static">
                    <li data-target="#carouselExampleIndicators01" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators01" data-slide-to="1" class=""></li>
                    <li data-target="#carouselExampleIndicators01" data-slide-to="2" class=""></li>
                </ol>
            </div>
        </div>

    </div>
    <div class="edwards-resources-sec bg-primary col-lg-6 p-3 py-5 p-xl-5">
        <h4 class="text-uppercase font-weight-bold ls-1 text-white edwards-brdr no-gry mb-3">key resources</h4>
        <div class="row mb-4">
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/benefits.jpg);">
                  <figcaption class="figure-caption">Benefits &amp; Wellness</figcaption></a>
                </figure>
            </div>
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/hr.jpg);">
                  <figcaption class="figure-caption">My HR</figcaption></a>
                </figure>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/banner01.jpg);">
                  <figcaption class="figure-caption">News Releases</figcaption></a>
                </figure>
            </div>
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/stats.png);">
                  <figcaption class="figure-caption">Usage Stats</figcaption></a>
                </figure>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/travel_policy.png);">
                  <figcaption class="figure-caption">Travel Policies</figcaption></a>
                </figure>
            </div>
            <div class="col-6">
                <figure class="figure mnu-fgr rsrcs w-100 m-0 border">
                  <a href="#" class=" banner d-block text-center" style="background-image: url(/_catalogs/masterpage/OneEdwards/images/it_support.jpg);">
                  <figcaption class="figure-caption">IT Requests</figcaption></a>
                </figure>
            </div>
        </div>
    </div>
</div>
<!-- end edwards channel -->â€‹


<script>
/*===  variables ===*/
var youtube = {
    clientContext: null,
    oList: null,
    editMode: false,
    responseMsg: '',
    items: []
};
/*===  variables ===*/	

/*===  helper functions ===*/
youtube.onQueryFailed = function(sender, args) {
    debugger;
    var customMsg = this.errorMsg? this.errorMsg : '';
    alert(customMsg + args.get_message() + '\n' + args.get_stackTrace());
}
/*===  helper functions ===*/

$( document ).ready(function() {
    SP.SOD.executeFunc('sp.js', 'SP.ClientContext', function(){
            youtube.getItems();
        });
});

youtube.getItems = function(){    
    youtube.clientContext = new SP.ClientContext();
    youtube.oList = youtube.clientContext.get_web().get_lists().getByTitle('Edwards Channel');
    var camlQuery = new SP.CamlQuery();
    //IsActive = true, Order by 'Order asc'.
    var q = "<View><Query><Where>" +"<Eq>" + "<FieldRef Name='IsActive' />" + "<Value Type='Boolean'>1</Value>" + "</Eq>" + " </Where>" + "<OrderBy><FieldRef Name='Order0' Ascending='True' /></OrderBy>" + "</Query>" + "</View>";
    camlQuery.set_viewXml(q);
    youtube.collListItem = youtube.oList.getItems(camlQuery);
    youtube.clientContext.load(youtube.collListItem);
    this.errorMsg = "Get list items request failed! "; //this is available in success/error functions called below;
    youtube.clientContext.executeQueryAsync(Function.createDelegate(this, youtube.onGetItemsQuerySucceeded), Function.createDelegate(this, youtube.onQueryFailed));  
}

youtube.onGetItemsQuerySucceeded = function(sender, args) {
    youtube.items = [];
    var listItemEnumerator = youtube.collListItem.getEnumerator();	
    while (listItemEnumerator.moveNext()) {
        var oListItem = listItemEnumerator.get_current();
        var item = {
                id: oListItem.get_item('ID'),
                title: oListItem.get_item('Title'),
                url: oListItem.get_item('Url'),
                order: oListItem.get_item('Order0')
            };
        youtube.items.push(item);
    }	

    if(youtube.items.length){
        $('.edwards-channel-sec .embed-responsive.mb-4 iframe').attr('src', youtube.items[0].url.$1_1);
        $('.edwards-channel-sec .embed-responsive.mb-4 .text-white').text(youtube.items[0].title);

        $('.edwards-channel-sec .embed-responsive.mb-2').each(function(i, obj) {
            if(youtube.items[i + 1]){
                $(this).find("iframe").attr('src', youtube.items[i+1].url.$1_1);
                $(this).siblings('.text-white').text(youtube.items[i+1].title);

            }
        });

        //all items go in the carousel.
        $('.edwards-channel-sec .edwards-mbl-carousel .carousel-item').each(function(i, obj) {
            if(youtube.items[i]){
                $(this).find("iframe").attr('src', youtube.items[i].url.$1_1);
                $(this).find('.text-white').text(youtube.items[i].title);

            }
        });
    }

}



</script>
